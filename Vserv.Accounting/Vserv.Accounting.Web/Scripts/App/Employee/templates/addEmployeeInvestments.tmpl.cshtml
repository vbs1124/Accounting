<div class="row form-horizontal">
    <div class="col-md-12">
        <div class="form-group">
            <div class="col-md-8">
                &nbsp;
            </div>
            <label for="" class="col-md-2 control-label">Financial Year</label>
            <div class="col-md-2">
                <select class="form-control" ng-model="vm.selectedInvestmentFinancialYear" ng-change="onChangeInvestmentFinancialYear()">
                    <option ng-repeat="x in vm.financialYears" value="{{x.currentYear}}">{{x.financialYear}}</option>
                </select>
            </div>
        </div>
    </div>
</div>
<div class="panel panel-default" ng-if="vm.empInvestmentDeclarationModel.InvestmentCategories.length > 0">
    <div class="panel-heading"><strong>Select a chapter to make / edit investment declarations under.</strong></div>
    <div class="panel-body">
        <form novalidate
              name="vm.form"
              ng-submit="vm.form.$valid && vm.addEmployeeInvestments()">
            <fieldset ng-disabled="vm.saving" class="clsEmpInvestment">
                <div class="panel-group" id="accordion">
                    <div class="panel panel-default" ng-repeat="category in vm.empInvestmentDeclarationModel.InvestmentCategories">
                        <div ng-switch="category.Code">
                            <div ng-switch-when="ICHOREAL">
                                <div class="panel-heading">
                                    <span class="panel-title">
                                        <i class="fa fa-question-circle" aria-hidden="true"></i> <strong><a data-toggle="collapse" data-parent="#accordion" href="#collapse{{category.InvestmentCategoryId}}">{{category.Name}}</a></strong>
                                    </span>
                                </div>
                                <div id="collapse{{category.InvestmentCategoryId}}" class="panel-collapse collapse in">
                                    <div class="panel-body">
                                        <table class="table table-bordered table-hover ">
                                            <thead>
                                                <tr class="success">
                                                    <th>&nbsp;</th>
                                                    <th class="text-left">Month</th>
                                                    <th class="text-center">Help</th>
                                                    <th class="text-center">Rent Paid</th>
                                                    <th class="text-center" ng-show="isapprovermode">Approved Rent</th>
                                                    <th class="text-left" ng-show="isapprovermode">Verified</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr ng-repeat="subCat in category.InvestmentSubCategories" vbs-popover>
                                                    <td class="text-right">{{$index + 1}}</td>
                                                    <td class="text-left">{{getHRALabel(subCat)}}</td>
                                                    <td class="text-center"><a href=""><i class="fa fa-question-circle fa-2x" aria-hidden="true" vbs="popover" data-toggle="popover" data-placement="top" data-content="{{subCat.Remark}}"></i></a></td>
                                                    <td class="text-center"><input class="form-control input-sm" ng-disabled="isapprovermode" maxlength="10" type="text" ng-model="subCat.DefaultAmount" /></td>
                                                    <td class="text-center" ng-show="isapprovermode"><input class="form-control input-sm" type="text" maxlength="10" ng-model="subCat.ApprovedAmount" /></td>
                                                    <td class="text-left" ng-show="isapprovermode"><input type="checkbox" ng-model="subCat.IsApproved" /></td>
                                                </tr>
                                            </tbody>
                                        </table>


                                    </div>
                                </div>
                            </div>
                            <div ng-switch-default>
                                <div class="panel-heading">
                                    <span class="panel-title">
                                        <i class="fa fa-question-circle" aria-hidden="true"></i> <strong><a data-toggle="collapse" data-parent="#accordion" href="#collapse{{category.InvestmentCategoryId}}">{{category.Name}}</a></strong>
                                    </span>
                                </div>
                                <div id="collapse{{category.InvestmentCategoryId}}" class="panel-collapse collapse in">
                                    <div class="panel-body">
                                        @*<ul>
                                                <li ng-repeat="item in category.InvestmentSubCategories">{{item.Name}}</li>
                                            </ul>*@

                                        <table class="table table-bordered table-hover ">
                                            <thead>
                                                <tr class="success">
                                                    <th class="text-right">&nbsp;</th>
                                                    <th class="text-left">Particulars</th>
                                                    <th class="text-center">Help</th>
                                                    <th class="text-left">Maximum Limit</th>
                                                    <th class="text-center">Declared Amount</th>
                                                    <th class="text-center" ng-show="isapprovermode">Approved Amount</th>
                                                    <th class="text-left" ng-show="isapprovermode">Verified</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr ng-repeat="subCat in category.InvestmentSubCategories" vbs-popover>
                                                    <td class="text-right">{{$index + 1}}</td>
                                                    <td class="text-left">{{subCat.Name}}</td>
                                                    <td class="text-center"><a href=""><i class="fa fa-question-circle fa-2x" vbs="popover" aria-hidden="true" data-toggle="popover" data-placement="top" data-content="{{subCat.Remark}}"></i></a></td>
                                                    <td class="text-left">{{subCat.MaximumLimit}}</td>
                                                    <td class="text-center"><input class="form-control input-sm" ng-disabled="isapprovermode" type="text" maxlength="10" ng-model="subCat.DefaultAmount" /></td>
                                                    <td class="text-center" ng-show="isapprovermode"><input class="form-control input-sm" type="text" maxlength="10" ng-model="subCat.ApprovedAmount" /></td>
                                                    <td class="text-left" ng-show="isapprovermode"><input type="checkbox" ng-model="subCat.IsApproved" /></td>
                                                </tr>
                                            </tbody>
                                        </table>



                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="bs-component">
                            <div class="alert alert-dismissible alert-warning">
                                <p><input type="checkbox" ng-model="isAgreed" />  I here by declare that Information as stated above is true and correct . I also authorize the company to recover tax (TDS) from my salary based on the PROOFS Submitted by me.  I am personally liable to Income Tax proceedings for any misstatements in the declaration or proofs submitted herewith if they are inconsistent with the requirement of Income Tax Act, 1961.</p><br />
                                I undertake to make the investments under various sections of the Income Tax Act not later than 50% on 20-12-2016 and rest on 14-02-2017
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="form-group pull-right">
                            @*<button type="button" class="btn btn-info">View Change History</button>*@
                            <div class="btn-group">
                                <button class="btn btn-success" ng-disabled="!isAgreed">Save</button>
                                <button type="reset" class="btn btn-default">Reset</button>
                            </div>
                        </div>
                    </div>
                </div>
            </fieldset>
        </form>
    </div>
</div>
